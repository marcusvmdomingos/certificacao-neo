@{
    ViewBag.Title = "Front End";
    Layout = "~/Views/Shared/Base/_Layout.cshtml";
}

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.13.4/jquery.mask.min.js"></script> -->

<div class="container-fluid">
  <form id="certificado-form" class="ui form segment">
    <div class="row">
      <div class="col-md-6">
        <label for="nome" class="">Nome</label>
        <input class="form-control form-control-lg mb-3" type="text" id="nome" name="nome" required>
      </div>
      <div class="col-md-6">
        <h3 id="nome-val" class="pt-4 mt-2">Valor</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <label for="email" class="">E-mail</label>
        <input class="form-control form-control-lg mb-3" type="email" id="email2" name="email" required>
      </div>
      <div class="col-md-6">
        <h3 id="email2-val" class="pt-4 mt-2">Valor</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <label for="telefone" class="">Telefone</label>
        <input class="form-control form-control-lg mb-3" type="number" id="telefone" name="telefone" required>
      </div>
      <div class="col-md-6">
        <h3 id="telefone-val" class="pt-4 mt-2">Valor</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <label for="assunto" class="">Assunto</label>
        <input class="form-control form-control-lg mb-3" type="text" id="assunto" name="assunto" required>
      </div>
      <div class="col-md-6">
        <h3 id="assunto-val" class="pt-4 mt-2">Valor</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <label for="mensagem" class="">Mensagem</label>
        <input class="form-control form-control-lg mb-3" type="textarea" id="mensagem" name="mensagem" required>
      </div>
      <div class="col-md-6">
        <h3 id="mensagem-val" class="pt-4 mt-2">Valor</h3>
      </div>
    </div>
    <button type="submit" class="btn btn-primary mb-3">Enviar</button>
  </form>
  <div class="row">
    <div id="dados" class="col-md-6 d-none">
      <h2>Dados da mensagem registrada</h2>
      <div id="retorno"></div>
    </div>
  </div>
</div>

<script>
$('.ui.form')
  .form({
    fields: {
      nome: 'empty',
      email: 'empty',
      telefone: 'empty',
      assunto: 'empty',
      mensagem: 'empty',
    }
  })
;
if( $('.ui.form').form('is valid')) {
  // form is valid (both email and name)
}

function printValue(id, value) {
  inputId = "#" + id + "-val";
  $(inputId).text(value);
  inputId = "";
}
$("input").on("keyup", function() {
  printValue($(this).attr('id'), $(this).val());
})

function registrar(form) {
  data = JSON.stringify($(form).serializeArray());
  sessionStorage.setItem('mensagem', data);
  alert("A mensagem foi salva em sess√£o.");
  recuperar();
  return false; //don't submit
}

function recuperar() {
  retorno = JSON.parse(sessionStorage.mensagem);
  $('#certificado-form').addClass('d-none');
  $('#dados').removeClass('d-none');
  console.log(retorno);
  for (var campo in retorno) {
    htmlCampo = '<h4><b>' + retorno[campo].name + '</b>: ' + retorno[campo].value + '</h4>';
    $('#retorno').append(htmlCampo);
  }

}
$("#certificado-form").submit(function(e){
  e.preventDefault();
  console.log('meu caralho');
  registrar($(this));
  e.stopImmediatePropagation();
});
</script>

<style>
#retorno h4 b{
  text-transform: capitalize;
}
.modal-backdrop.show {
  display: none !important;
}
</style>